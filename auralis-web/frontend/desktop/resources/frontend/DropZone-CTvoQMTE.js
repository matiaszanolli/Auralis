import{s as C,P,b0 as d,r as i,j as a,t as j,b1 as w,b2 as A,J as E,y as g}from"./vendor-ZvUuodmP.js";import{t as o}from"./tokens-DlAeTiWz.js";import{g as R}from"./App-zsZ8I90D.js";import"./assets/index-VS_9sDlP.js";const T=C(P,{shouldForwardProp:e=>e!=="$isDragging"&&e!=="$disabled"&&e!=="$scanning"})(({$isDragging:e,$disabled:r,$scanning:s})=>({position:"relative",padding:o.spacing.xxl,borderRadius:o.borderRadius.lg,border:`2px dashed ${e?o.colors.accent.primary:s?d(o.colors.text.secondary,.3):d(o.colors.text.disabled,.2)}`,background:e?d(o.colors.accent.primary,.05):s?d(o.colors.bg.elevated,.5):"transparent",cursor:r||s?"not-allowed":"pointer",transition:"all 0.3s ease",textAlign:"center",overflow:"hidden",opacity:r?.5:1,...!r&&!s&&{"&:hover":{borderColor:o.colors.accent.primary,background:d(o.colors.accent.primary,.02),transform:"scale(1.01)"}},...e&&{"&::before":{content:'""',position:"absolute",inset:0,background:R.aurora,opacity:.05,animation:"pulse 2s ease-in-out infinite"}},"@keyframes pulse":{"0%, 100%":{opacity:.05},"50%":{opacity:.1}},"@keyframes bounce":{"0%, 100%":{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"}},"@keyframes fadeIn":{from:{opacity:0,transform:"scale(0.8)"},to:{opacity:1,transform:"scale(1)"}}})),I=(e=!1,r=!1)=>{const[s,n]=i.useState(!1),[b,f]=i.useState(0),x=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),!(e||r)&&(f(c=>c+1),t.dataTransfer.items&&t.dataTransfer.items.length>0&&n(!0))},[e,r]),h=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),!(e||r)&&f(c=>{const l=c-1;return l===0&&n(!1),l})},[e,r]),y=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),!(e||r)&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},[e,r]),m=i.useCallback((t,c)=>{if(t.preventDefault(),t.stopPropagation(),n(!1),f(0),e||r)return;const l=Array.from(t.dataTransfer.items);if(l.length>0){const D=l[0];if(D.kind==="file"){const p=D.webkitGetAsEntry();if(p&&p.isDirectory){const u=p.fullPath||p.name;c(u)}else if(p&&p.isFile){const u=D.getAsFile();if(u){const k=u.webkitRelativePath||u.name,v=k.substring(0,k.lastIndexOf("/"))||"./";c(v)}}}}},[e,r]);return{isDragging:s,handleDragEnter:x,handleDragLeave:h,handleDragOver:y,handleDrop:m}},O=({isDragging:e,scanning:r})=>a.jsx(j,{sx:{mb:2,display:"flex",justifyContent:"center",alignItems:"center"},children:r?a.jsx(w,{sx:{fontSize:64,color:o.colors.semantic.success,animation:"fadeIn 0.3s ease"}}):e?a.jsx(A,{sx:{fontSize:64,color:o.colors.accent.primary,animation:"bounce 1s ease infinite"}}):a.jsx(E,{sx:{fontSize:64,color:o.colors.text.disabled,transition:"color 0.3s ease"}})}),S=({isDragging:e,scanning:r})=>a.jsxs(a.Fragment,{children:[a.jsx(g,{variant:"h6",sx:{fontWeight:600,color:e?o.colors.accent.primary:o.colors.text.primary,mb:1,transition:"color 0.3s ease"},children:r?"Scanning...":e?"Drop folder here":"Drag & Drop Music Folder"}),a.jsx(g,{variant:"body2",sx:{color:o.colors.text.secondary,maxWidth:400,mx:"auto"},children:r?"Please wait while we scan your music library":e?"Release to start scanning":"Drag a folder containing music files here, or click to browse"}),!r&&!e&&a.jsx(g,{variant:"caption",sx:{display:"block",mt:2,color:o.colors.text.disabled,fontSize:11},children:"Supported: MP3, FLAC, WAV, OGG, M4A, AAC, WMA"})]}),L=({onFolderDrop:e,onFolderSelect:r,disabled:s=!1,scanning:n=!1})=>{const b=i.useRef(null),{isDragging:f,handleDragEnter:x,handleDragLeave:h,handleDragOver:y,handleDrop:m}=I(s,n),t=i.useCallback(l=>{m(l,e)},[m,e]),c=i.useCallback(()=>{if(!(s||n)&&r){const l=prompt("Enter folder path to scan:");l&&r(l)}},[s,n,r]);return a.jsxs(T,{ref:b,onDragEnter:x,onDragLeave:h,onDragOver:y,onDrop:t,onClick:c,$isDragging:f,$disabled:s,$scanning:n,children:[a.jsx(O,{isDragging:f,scanning:n}),a.jsx(S,{isDragging:f,scanning:n})]})};export{L as DropZone,L as default};
